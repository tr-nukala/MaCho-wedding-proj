<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Manasa &amp; Sharath ‚Äî RSVP</title>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <script src="script.js" defer></script>
</head>
<body>
  <!-- Hamburger Menu -->
  <nav class="nav-menu">
    <button class="hamburger" id="hamburger-btn" aria-label="Toggle navigation">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <div class="nav-overlay" id="nav-overlay">
      <ul class="nav-links">
        <li><a href="home.html">Home</a></li>
        <li><a href="rsvp.html">RSVP</a></li>
        <li><a href="events.html">Events</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a href="photos.html">Photos</a></li>
        <li><a href="live.html">Live Stream</a></li>
      </ul>
    </div>
  </nav>
  
  <a href="home.html" class="site-title-link">
    <h1 class="animate__animated animate__fadeInDown">Manasa &amp; Sharath</h1>
  </a>
  <p>Please RSVP by <strong>August 7th</strong>. </p>

  <!-- Formspree handles data: replace xxxx with your form ID -->
  <form id="rsvp-form" action="https://formspree.io/f/mwpqkekw" method="POST" class="animate__animated animate__fadeInUp">
    <label>Your Name
      <input name="name" required placeholder="First Name" type="text" pattern="[A-Za-z\s]+" title="Please enter your name using letters only.">
    </label>

    <label>Email
      <input name="email" type="email" required placeholder="name@example.com">
    </label>

    <label>Phone Number
        <input
            name="phone"
            type="tel"
            inputmode="tel"
            required
            placeholder="(555) 123-4567"
            id="phone-input"
        >
    </label>

    <label>Party Size</label>
    <div class="party-size-container">
      <div class="party-card">
        <div class="party-label">Adults</div>
        <div class="number-input">
          <button type="button" class="minus" aria-label="Decrease adults">‚àí</button>
          <input
            name="partySize"
            type="number"
            min="1"
            value="1"
            required
            inputmode="numeric"
            pattern="[0-9]*"
          >
          <button type="button" class="plus" aria-label="Increase adults">+</button>
        </div>
      </div>
      
      <div class="party-card">
        <div class="party-label">Kids</div>
        <div class="number-input">
          <button type="button" class="minus" aria-label="Decrease kids">‚àí</button>
          <input
            name="kids"
            type="number"
            min="0"
            value="0"
            required
            inputmode="numeric"
            pattern="[0-9]*"
          >
          <button type="button" class="plus" aria-label="Increase kids">+</button>
        </div>
      </div>
    </div>

    <fieldset>
      <legend>Events</legend>

    <label class="event" for="ev-mehendi">
        <input type="checkbox" id="ev-mehendi" name="Mehendi" value="yes">
        <div class="event-content">
            <div class="event-name">Mehendi</div>
            <div class="event-datetime">August&nbsp;07, 6&nbsp;PM onwards</div>
            <div class="event-address">517&nbsp;Jacob&nbsp;Dr, Aubrey, TX&nbsp;76227</div>
        </div>
    </label>

    <label class="event" for="ev-haldi">
        <input type="checkbox" id="ev-haldi" name="Haldi" value="yes">
        <div class="event-content">
            <div class="event-name">Haldi</div>
            <div class="event-datetime">August&nbsp;08, 6&nbsp;PM onwards</div>
            <div class="event-address">Elegance Estates, 1301&nbsp;E&nbsp;Blackjack&nbsp;Rd, Pilot&nbsp;Point, TX&nbsp;76258</div>
            <div class="event-tag">
                <strong><em>Bring your cool moves and crazy vibes. Wear white or yellow.</em></strong>
            </div>
        </div>
    </label>

    <label class="event" for="ev-wedding">
        <input type="checkbox" id="ev-wedding" name="Wedding" value="yes">
        <div class="event-content">
            <div class="event-name">Wedding</div>
            <div class="event-datetime">August&nbsp;09, Muhurtham:&nbsp;11:35&nbsp;PM (reception starts 9&nbsp;PM)</div>
            <div class="event-address">Elegance Estates, 1301&nbsp;E&nbsp;Blackjack&nbsp;Rd, Pilot&nbsp;Point, TX&nbsp;76258</div>
        </div>
    </label>
    </fieldset>

    <!-- Honeypot for bots -->
    <input type="text" name="website" style="display:none" autocomplete="off">
    <!-- Shared secret token -->
    <input type="hidden" name="token" value="rsvp123">

    <div style="text-align: center; margin-top: 1em;">
        <button type="submit">Send RSVP</button>
    </div>
  </form>
  <footer>
    <span class="powered animate__animated animate__heartBeat animate__repeat-2">
        Powered by bad dance moves üíÉ & good coffee ‚òï<br>
        Site brewed with ‚ù§Ô∏è by <strong>Tarun Reddy Nukala</strong>
    </span>
  </footer>
</body>
</html>
<script>
/* ---- AJAX submit to Formspree ---- */
(function () {
  const form = document.getElementById('rsvp-form');
  if (!form) return;

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    // Build FormData directly from the form fields
    const fd = new FormData(form);

    // Add computed fields
    fd.set('token', 'rsvp123');   // shared secret
    fd.set(
      'events',
      Array.from(form.querySelectorAll('input[type=checkbox]:checked'))
           .map(cb => cb.name)
           .join(', ')
    );

    // Honeypot field (website) already part of FormData

    const endpoint = 'https://script.google.com/macros/s/AKfycbxcQkjPC0CRhlJ0O3HoZvO7t3R7paWm6xntx0GhlboYEmvmiOJ_5_RFT3VZCaJi8LSo/exec';

    const submitBtn = form.querySelector('button[type="submit"]');
    submitBtn.disabled = true;
    submitBtn.textContent = 'Sending‚Ä¶';

    try {
      await fetch(endpoint, { method: 'POST', body: fd, mode: 'no-cors' });
      // We can't read the response in no‚Äëcors mode,
      // but if the network succeeds we treat it as success.
      window.location.href = 'success.html';
    } catch {
      alert('Network error. Please try again.');
      submitBtn.disabled = false;
      submitBtn.textContent = 'Send RSVP';
    }
  });
})();
</script>